(this.webpackJsonpKairos=this.webpackJsonpKairos||[]).push([[2],[,,,function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}e.d(n,"a",(function(){return r}))},function(t,n,e){"use strict";function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}e.d(n,"a",(function(){return i}))},,function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(r){"object"===typeof window&&(e=window)}t.exports=e},,function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}e.d(n,"a",(function(){return r}))},function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e(8);function i(t,n){if(t){if("string"===typeof t)return Object(r.a)(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(r.a)(t,n):void 0}}},function(t,n,e){t.exports=e(15)},function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));var r=e(12);function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){Object(r.a)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}},function(t,n,e){"use strict";function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.d(n,"a",(function(){return r}))},function(t,n,e){"use strict";function r(t,n,e,r,i,o,u){try{var a=t[o](u),c=a.value}catch(s){return void e(s)}a.done?n(c):Promise.resolve(c).then(r,i)}function i(t){return function(){var n=this,e=arguments;return new Promise((function(i,o){var u=t.apply(n,e);function a(t){r(u,i,o,a,c,"next",t)}function c(t){r(u,i,o,a,c,"throw",t)}a(void 0)}))}}e.d(n,"a",(function(){return i}))},,function(t,n,e){var r=function(t){"use strict";var n,e=Object.prototype,r=e.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{c({},"")}catch(I){c=function(t,n,e){return t[n]=e}}function s(t,n,e,r){var i=n&&n.prototype instanceof y?n:y,o=Object.create(i.prototype),u=new S(r||[]);return o._invoke=function(t,n,e){var r=l;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return A()}for(e.method=i,e.arg=o;;){var u=e.delegate;if(u){var a=j(u,e);if(a){if(a===v)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===l)throw r=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=d;var c=f(t,n,e);if("normal"===c.type){if(r=e.done?p:h,c.arg===v)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r=p,e.method="throw",e.arg=c.arg)}}}(t,e,u),o}function f(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(I){return{type:"throw",arg:I}}}t.wrap=s;var l="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(T([])));_&&_!==e&&r.call(_,o)&&(b=_);var k=g.prototype=y.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(n){c(t,n,(function(t){return this._invoke(n,t)}))}))}function O(t,n){function e(i,o,u,a){var c=f(t[i],t,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"===typeof l&&r.call(l,"__await")?n.resolve(l.__await).then((function(t){e("next",t,u,a)}),(function(t){e("throw",t,u,a)})):n.resolve(l).then((function(t){s.value=t,u(s)}),(function(t){return e("throw",t,u,a)}))}a(c.arg)}var i;this._invoke=function(t,r){function o(){return new n((function(n,i){e(t,r,n,i)}))}return i=i?i.then(o,o):o()}}function j(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function P(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,u=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return u.next=u}}return{next:A}}function A(){return{value:n,done:!0}}return m.prototype=k.constructor=g,g.constructor=m,m.displayName=c(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"===typeof t&&t.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,a,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},x(O.prototype),O.prototype[u]=function(){return this},t.AsyncIterator=O,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var u=new O(s(n,e,r,i),o);return t.isGeneratorFunction(e)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},x(k),c(k,a,"Generator"),k[o]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var c=r.call(u,"catchLoc"),s=r.call(u,"finallyLoc");if(c&&s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),v},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),P(e),v}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var i=r.arg;P(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,n,e){"use strict";(function(t,e){var r=Object.keys,i=Array.isArray,o="undefined"!==typeof self?self:"undefined"!==typeof window?window:t;function u(t,n){return"object"!==typeof n||r(n).forEach((function(e){t[e]=n[e]})),t}var a=Object.getPrototypeOf,c={}.hasOwnProperty;function s(t,n){return c.call(t,n)}function f(t,n){"function"===typeof n&&(n=n(a(t))),r(n).forEach((function(e){h(t,e,n[e])}))}var l=Object.defineProperty;function h(t,n,e,r){l(t,n,u(e&&s(e,"get")&&"function"===typeof e.get?{get:e.get,set:e.set,configurable:!0}:{value:e,configurable:!0,writable:!0},r))}function d(t){return{from:function(n){return t.prototype=Object.create(n.prototype),h(t.prototype,"constructor",t),{extend:f.bind(null,t.prototype)}}}}var p=Object.getOwnPropertyDescriptor;function v(t,n){var e;return p(t,n)||(e=a(t))&&v(e,n)}var y=[].slice;function m(t,n,e){return y.call(t,n,e)}function g(t,n){return n(t)}function b(t){if(!t)throw new Error("Assertion Failed")}function w(t){o.setImmediate?e(t):setTimeout(t,0)}function _(t,n){return t.reduce((function(t,e,r){var i=n(e,r);return i&&(t[i[0]]=i[1]),t}),{})}function k(t,n){return function(){try{t.apply(this,arguments)}catch(e){n(e)}}}function x(t,n,e){try{t.apply(null,e)}catch(r){n&&n(r)}}function O(t,n){if(s(t,n))return t[n];if(!n)return t;if("string"!==typeof n){for(var e=[],r=0,i=n.length;r<i;++r){var o=O(t,n[r]);e.push(o)}return e}var u=n.indexOf(".");if(-1!==u){var a=t[n.substr(0,u)];return void 0===a?void 0:O(a,n.substr(u+1))}}function j(t,n,e){if(t&&void 0!==n&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!==typeof n&&"length"in n){b("string"!==typeof e&&"length"in e);for(var r=0,i=n.length;r<i;++r)j(t,n[r],e[r])}else{var o=n.indexOf(".");if(-1!==o){var u=n.substr(0,o),a=n.substr(o+1);if(""===a)void 0===e?delete t[u]:t[u]=e;else{var c=t[u];c||(c=t[u]={}),j(c,a,e)}}else void 0===e?delete t[n]:t[n]=e}}function E(t){var n={};for(var e in t)s(t,e)&&(n[e]=t[e]);return n}var P=[].concat;function S(t){return P.apply([],t)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(S([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(n){return n+t+"Array"}))})))).filter((function(t){return o[t]})).map((function(t){return o[t]}));function A(t){if(!t||"object"!==typeof t)return t;var n;if(i(t)){n=[];for(var e=0,r=t.length;e<r;++e)n.push(A(t[e]))}else if(T.indexOf(t.constructor)>=0)n=t;else for(var o in n=t.constructor?Object.create(t.constructor.prototype):{},t)s(t,o)&&(n[o]=A(t[o]));return n}function I(t,n,e,i){return e=e||{},i=i||"",r(t).forEach((function(r){if(s(n,r)){var o=t[r],u=n[r];"object"===typeof o&&"object"===typeof u&&o&&u&&""+o.constructor===""+u.constructor?I(o,u,e,i+r+"."):o!==u&&(e[i+r]=n[r])}else e[i+r]=void 0})),r(n).forEach((function(r){s(t,r)||(e[i+r]=n[r])})),e}var D="undefined"!==typeof Symbol&&Symbol.iterator,C=D?function(t){var n;return null!=t&&(n=t[D])&&n.apply(t)}:function(){return null},K={};function F(t){var n,e,r,o;if(1===arguments.length){if(i(t))return t.slice();if(this===K&&"string"===typeof t)return[t];if(o=C(t)){for(e=[];!(r=o.next()).done;)e.push(r.value);return e}if(null==t)return[t];if("number"===typeof(n=t.length)){for(e=new Array(n);n--;)e[n]=t[n];return e}return[t]}for(n=arguments.length,e=new Array(n);n--;)e[n]=arguments[n];return e}var B="undefined"!==typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function L(t,n){B=t,M=n}var M=function(){return!0},N=!new Error("").stack;function R(){if(N)try{throw R.arguments,new Error}catch(t){return t}return new Error}function q(t,n){var e=t.stack;return e?(n=n||0,0===e.indexOf(t.name)&&(n+=(t.name+t.message).split("\n").length),e.split("\n").slice(n).filter(M).map((function(t){return"\n"+t})).join("")):""}var U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],V=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function z(t,n){this._e=R(),this.name=t,this.message=n}function W(t,n,e,r){this._e=R(),this.failures=n,this.failedKeys=r,this.successCount=e}function Q(t,n){this._e=R(),this.name="BulkError",this.failures=n,this.message=function(t,n){return t+". Errors: "+n.map((function(t){return t.toString()})).filter((function(t,n,e){return e.indexOf(t)===n})).join("\n")}(t,n)}d(z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(W).from(z),d(Q).from(z);var H=V.reduce((function(t,n){return t[n]=n+"Error",t}),{}),J=z,$=V.reduce((function(t,n){var e=n+"Error";function r(t,r){this._e=R(),this.name=e,t?"string"===typeof t?(this.message=t,this.inner=r||null):"object"===typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=G[n]||e,this.inner=null)}return d(r).from(J),t[n]=r,t}),{});$.Syntax=SyntaxError,$.Type=TypeError,$.Range=RangeError;var Y=U.reduce((function(t,n){return t[n+"Error"]=$[n],t}),{});var X=V.reduce((function(t,n){return-1===["Syntax","Type","Range"].indexOf(n)&&(t[n+"Error"]=$[n]),t}),{});function Z(){}function tt(t){return t}function nt(t,n){return null==t||t===tt?n:function(e){return n(t(e))}}function et(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function rt(t,n){return t===Z?n:function(){var e=t.apply(this,arguments);void 0!==e&&(arguments[0]=e);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?et(r,this.onsuccess):r),i&&(this.onerror=this.onerror?et(i,this.onerror):i),void 0!==o?o:e}}function it(t,n){return t===Z?n:function(){t.apply(this,arguments);var e=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?et(e,this.onsuccess):e),r&&(this.onerror=this.onerror?et(r,this.onerror):r)}}function ot(t,n){return t===Z?n:function(e){var r=t.apply(this,arguments);u(e,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?et(i,this.onsuccess):i),o&&(this.onerror=this.onerror?et(o,this.onerror):o),void 0===r?void 0===a?void 0:a:u(r,a)}}function ut(t,n){return t===Z?n:function(){return!1!==n.apply(this,arguments)&&t.apply(this,arguments)}}function at(t,n){return t===Z?n:function(){var e=t.apply(this,arguments);if(e&&"function"===typeof e.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return e.then((function(){return n.apply(r,o)}))}return n.apply(this,arguments)}}X.ModifyError=W,X.DexieError=z,X.BulkError=Q;var ct={},st=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(n){var t=o.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),ft=st[0],lt=st[1],ht=st[2],dt=lt&&lt.then,pt=ft&&ft.constructor,vt=st[3],yt=!!ht,mt=!1,gt=ht?function(){ht.then(qt)}:o.setImmediate?e.bind(null,qt):o.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){qt(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(qt,0)},bt=function(t,n){St.push([t,n]),_t&&(gt(),_t=!1)},wt=!0,_t=!0,kt=[],xt=[],Ot=null,jt=tt,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:hn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{hn(t[0],t[1])}catch(n){}}))}},Pt=Et,St=[],Tt=0,At=[];function It(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var n=this._PSD=Pt;if(B&&(this._stackHolder=R(),this._prev=null,this._numPrev=0),"function"!==typeof t){if(t!==ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ft(this,this._value))}this._state=null,this._value=null,++n.ref,Kt(this,t)}var Dt={get:function(){var t=Pt,n=Yt;function e(e,r){var i=this,o=!t.global&&(t!==Pt||n!==Yt);o&&nn();var u=new It((function(n,u){Lt(i,new Ct(sn(e,t,o),sn(r,t,o),n,u,t))}));return B&&Rt(u,this),u}return e.prototype=ct,e},set:function(t){h(this,"then",t&&t.prototype===ct?Dt:{get:function(){return t},set:Dt.set})}};function Ct(t,n,e,r,i){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof n?n:null,this.resolve=e,this.reject=r,this.psd=i}function Kt(t,n){try{n((function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var e=t._lib&&Ut();n&&"function"===typeof n.then?Kt(t,(function(t,e){n instanceof It?n._then(t,e):n.then(t,e)})):(t._state=!0,t._value=n,Bt(t)),e&&Vt()}}),Ft.bind(null,t))}catch(e){Ft(t,e)}}function Ft(t,n){if(xt.push(n),null===t._state){var e=t._lib&&Ut();n=jt(n),t._state=!1,t._value=n,B&&null!==n&&"object"===typeof n&&!n._promise&&x((function(){var e=v(n,"stack");n._promise=t,h(n,"stack",{get:function(){return mt?e&&(e.get?e.get.apply(n):e.value):t.stack}})})),function(t){kt.some((function(n){return n._value===t._value}))||kt.push(t)}(t),Bt(t),e&&Vt()}}function Bt(t){var n=t._listeners;t._listeners=[];for(var e=0,r=n.length;e<r;++e)Lt(t,n[e]);var i=t._PSD;--i.ref||i.finalize(),0===Tt&&(++Tt,bt((function(){0===--Tt&&Gt()}),[]))}function Lt(t,n){if(null!==t._state){var e=t._state?n.onFulfilled:n.onRejected;if(null===e)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++Tt,bt(Mt,[e,t,n])}else t._listeners.push(n)}function Mt(t,n,e){try{Ot=n;var r,i=n._value;n._state?r=t(i):(xt.length&&(xt=[]),r=t(i),-1===xt.indexOf(i)&&function(t){var n=kt.length;for(;n;)if(kt[--n]._value===t._value)return void kt.splice(n,1)}(n)),e.resolve(r)}catch(o){e.reject(o)}finally{Ot=null,0===--Tt&&Gt(),--e.psd.ref||e.psd.finalize()}}function Nt(t,n,e){if(n.length===e)return n;var r="";if(!1===t._state){var i,o,u=t._value;null!=u?(i=u.name||"Error",o=u.message||u,r=q(u,0)):(i=u,o=""),n.push(i+(o?": "+o:"")+r)}return B&&((r=q(t._stackHolder,2))&&-1===n.indexOf(r)&&n.push(r),t._prev&&Nt(t._prev,n,e)),n}function Rt(t,n){var e=n?n._numPrev+1:0;e<100&&(t._prev=n,t._numPrev=e)}function qt(){Ut()&&Vt()}function Ut(){var t=wt;return wt=!1,_t=!1,t}function Vt(){var t,n,e;do{for(;St.length>0;)for(t=St,St=[],e=t.length,n=0;n<e;++n){var r=t[n];r[0].apply(null,r[1])}}while(St.length>0);wt=!0,_t=!0}function Gt(){var t=kt;kt=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var n=At.slice(0),e=n.length;e;)n[--e]()}function zt(t){return new It(ct,!1,t)}function Wt(t,n){var e=Pt;return function(){var r=Ut(),i=Pt;try{return un(e,!0),t.apply(this,arguments)}catch(o){n&&n(o)}finally{un(i,!1),r&&Vt()}}}f(It.prototype,{then:Dt,_then:function(t,n){Lt(this,new Ct(null,null,t,n,Pt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var n=arguments[0],e=arguments[1];return"function"===typeof n?this.then(null,(function(t){return t instanceof n?e(t):zt(t)})):this.then(null,(function(t){return t&&t.name===n?e(t):zt(t)}))},finally:function(t){return this.then((function(n){return t(),n}),(function(n){return t(),zt(n)}))},stack:{get:function(){if(this._stack)return this._stack;try{mt=!0;var t=Nt(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{mt=!1}}},timeout:function(t,n){var e=this;return t<1/0?new It((function(r,i){var o=setTimeout((function(){return i(new $.Timeout(n))}),t);e.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!==typeof Symbol&&Symbol.toStringTag&&h(It.prototype,Symbol.toStringTag,"Promise"),Et.env=an(),f(It,{all:function(){var t=F.apply(null,arguments).map(en);return new It((function(n,e){0===t.length&&n([]);var r=t.length;t.forEach((function(i,o){return It.resolve(i).then((function(e){t[o]=e,--r||n(t)}),e)}))}))},resolve:function(t){if(t instanceof It)return t;if(t&&"function"===typeof t.then)return new It((function(n,e){t.then(n,e)}));var n=new It(ct,!0,t);return Rt(n,Ot),n},reject:zt,race:function(){var t=F.apply(null,arguments).map(en);return new It((function(n,e){t.map((function(t){return It.resolve(t).then(n,e)}))}))},PSD:{get:function(){return Pt},set:function(t){return Pt=t}},newPSD:Zt,usePSD:cn,scheduler:{get:function(){return bt},set:function(t){bt=t}},rejectionMapper:{get:function(){return jt},set:function(t){jt=t}},follow:function(t,n){return new It((function(e,r){return Zt((function(n,e){var r=Pt;r.unhandleds=[],r.onunhandled=e,r.finalize=et((function(){var t=this;!function(t){function n(){t(),At.splice(At.indexOf(n),1)}At.push(n),++Tt,bt((function(){0===--Tt&&Gt()}),[])}((function(){0===t.unhandleds.length?n():e(t.unhandleds[0])}))}),r.finalize),t()}),n,e,r)}))}});var Qt={awaits:0,echoes:0,id:0},Ht=0,Jt=[],$t=0,Yt=0,Xt=0;function Zt(t,n,e,r){var i=Pt,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xt;var a=Et.env;o.env=yt?{Promise:It,PromiseProp:{value:It,configurable:!0,writable:!0},all:It.all,race:It.race,resolve:It.resolve,reject:It.reject,nthen:fn(a.nthen,o),gthen:fn(a.gthen,o)}:{},n&&u(o,n),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=cn(o,t,e,r);return 0===o.ref&&o.finalize(),c}function tn(){return Qt.id||(Qt.id=++Ht),++Qt.awaits,Qt.echoes+=7,Qt.id}function nn(t){!Qt.awaits||t&&t!==Qt.id||(0===--Qt.awaits&&(Qt.id=0),Qt.echoes=7*Qt.awaits)}function en(t){return Qt.echoes&&t&&t.constructor===pt?(tn(),t.then((function(t){return nn(),t}),(function(t){return nn(),dn(t)}))):t}function rn(t){++Yt,Qt.echoes&&0!==--Qt.echoes||(Qt.echoes=Qt.id=0),Jt.push(Pt),un(t,!0)}function on(){var t=Jt[Jt.length-1];Jt.pop(),un(t,!1)}function un(t,n){var e,r=Pt;if((n?!Qt.echoes||$t++&&t===Pt:!$t||--$t&&t===Pt)||(e=n?rn.bind(null,t):on,dt.call(ft,e)),t!==Pt&&(Pt=t,r===Et&&(Et.env=an()),yt)){var i=Et.env.Promise,u=t.env;lt.then=u.nthen,i.prototype.then=u.gthen,(r.global||t.global)&&(Object.defineProperty(o,"Promise",u.PromiseProp),i.all=u.all,i.race=u.race,i.resolve=u.resolve,i.reject=u.reject)}}function an(){var t=o.Promise;return yt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:lt.then,gthen:t.prototype.then}:{}}function cn(t,n,e,r,i){var o=Pt;try{return un(t,!0),n(e,r,i)}finally{un(o,!1)}}function sn(t,n,e){return"function"!==typeof t?t:function(){var r=Pt;e&&tn(),un(n,!0);try{return t.apply(this,arguments)}finally{un(r,!1)}}}function fn(t,n){return function(e,r){return t.call(this,sn(e,n,!1),sn(r,n,!1))}}var ln="unhandledrejection";function hn(t,n){var e;try{e=n.onuncatched(t)}catch(a){}if(!1!==e)try{var r,i={promise:n,reason:t};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ln,!0,!0),u(r,i)):o.CustomEvent&&u(r=new CustomEvent(ln,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(c){}r.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(a){}}var dn=It.reject;function pn(t){var n={},e=function(e,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[e].subscribe.apply(null,o),t}if("string"===typeof e)return n[e]};e.addEventType=a;for(var o=1,u=arguments.length;o<u;++o)a(arguments[o]);return e;function a(t,r,i){if("object"===typeof t)return c(t);r||(r=ut),i||(i=Z);var o={subscribers:[],fire:i,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=r(o.fire,t))},unsubscribe:function(t){o.subscribers=o.subscribers.filter((function(n){return n!==t})),o.fire=o.subscribers.reduce(r,i)}};return n[t]=e[t]=o,o}function c(t){r(t).forEach((function(n){var e=t[n];if(i(e))a(n,t[n][0],t[n][1]);else{if("asap"!==e)throw new $.InvalidArgument("Invalid event config");var r=a(n,tt,(function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];r.subscribers.forEach((function(t){w((function(){t.apply(null,n)}))}))}))}}))}}var vn,yn="{version}",mn=String.fromCharCode(65535),gn=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return mn}}(),bn=-1/0,wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_n="String expected.",kn=[],xn="undefined"!==typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),On=xn,jn=xn,En=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function Pn(t,n){var e,a,c,l,d,p=Pn.dependencies,v=u({addons:Pn.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},n),y=v.addons,w=v.autoOpen,P=v.indexedDB,T=v.IDBKeyRange,D=this._dbSchema={},C=[],L=[],M={},N=null,U=null,V=!1,G=null,z=!1,H="readonly",J="readwrite",Y=this,X=new It((function(t){e=t})),et=new It((function(t,n){a=n})),ut=!0,ct=!!Nn(P);function st(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ft(t,n,e){var i=Y._createTransaction(J,L,D);i.create(n),i._completion.catch(e);var o=i._reject.bind(i);Zt((function(){Pt.trans=i,0===t?(r(D).forEach((function(t){lt(n,t,D[t].primKey,D[t].indexes)})),It.follow((function(){return Y.on.populate.fire(i)})).catch(o)):function(t,n,e){var i=[],o=C.filter((function(n){return n._cfg.version===t}))[0];if(!o)throw new $.Upgrade("Dexie specification of currently installed DB version is missing");D=Y._dbSchema=o._cfg.dbschema;var u=!1;function a(){return i.length?It.resolve(i.shift()(n.idbtrans)).then(a):It.resolve()}return C.filter((function(n){return n._cfg.version>t})).forEach((function(t){i.push((function(){var r=D,i=t._cfg.dbschema;Bt(r,e),Bt(i,e),D=Y._dbSchema=i;var o=function(t,n){var e={del:[],add:[],change:[]};for(var r in t)n[r]||e.del.push(r);for(r in n){var i=t[r],o=n[r];if(i){var u={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)u.recreate=!0,e.change.push(u);else{var a=i.idxByName,c=o.idxByName;for(var s in a)c[s]||u.del.push(s);for(s in c){var f=a[s],l=c[s];f?f.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&e.change.push(u)}}else e.add.push([r,o])}return e}(r,i);if(o.add.forEach((function(t){lt(e,t[0],t[1].primKey,t[1].indexes)})),o.change.forEach((function(t){if(t.recreate)throw new $.Upgrade("Not yet support for changing primary key");var n=e.objectStore(t.name);t.add.forEach((function(t){ht(n,t)})),t.change.forEach((function(t){n.deleteIndex(t.name),ht(n,t)})),t.del.forEach((function(t){n.deleteIndex(t)}))})),t._cfg.contentUpgrade)return u=!0,It.follow((function(){t._cfg.contentUpgrade(n)}))})),i.push((function(n){u&&On||function(t,n){for(var e=0;e<n.db.objectStoreNames.length;++e){var r=n.db.objectStoreNames[e];null==t[r]&&n.db.deleteObjectStore(r)}}(t._cfg.dbschema,n)}))})),a().then((function(){!function(t,n){r(t).forEach((function(e){n.db.objectStoreNames.contains(e)||lt(n,e,t[e].primKey,t[e].indexes)}))}(D,e)}))}(t,i,n).catch(o)}))}function lt(t,n,e,r){var i=t.db.createObjectStore(n,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach((function(t){ht(i,t)})),i}function ht(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function dt(t,n,e){if(z||Pt.letThrough){var r=Y._createTransaction(t,n,D);try{r.create()}catch(i){return dn(i)}return r._promise(t,(function(t,n){return Zt((function(){return Pt.trans=r,e(t,n,r)}))})).then((function(t){return r._completion.then((function(){return t}))}))}if(!V){if(!w)return dn(new $.DatabaseClosed);Y.open().catch(Z)}return X.then((function(){return dt(t,n,e)}))}function yt(t,n,e){var r=arguments.length;if(r<2)throw new $.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];e=i.pop();var o=S(i);return[t,o,e]}function mt(t,n,e){this.name=t,this.schema=n,this._tx=e,this.hook=M[t]?M[t].hook:pn(null,{creating:[rt,Z],reading:[nt,tt],updating:[ot,Z],deleting:[it,Z]})}function gt(t,n,e){return(e?Cn:In)((function(e){t.push(e),n&&n()}))}function bt(t,n,e,r,i){return new It((function(o,u){var a=e.length,c=a-1;if(0===a)return o();if(r){var s,f=Cn(u),l=An(null);x((function(){for(var r=0;r<a;++r){s={onsuccess:null,onerror:null};var u=e[r];i.call(s,u[0],u[1],n);var h=t.delete(u[0]);h._hookCtx=s,h.onerror=f,h.onsuccess=r===c?An(o):l}}),(function(t){throw s.onerror&&s.onerror(t),t}))}else for(var h=0;h<a;++h){var d=t.delete(e[h]);d.onerror=In(u),h===c&&(d.onsuccess=Wt((function(){return o()})))}}))}function wt(t,n,e,r){var i=this;this.db=Y,this.mode=t,this.storeNames=n,this.idbtrans=null,this.on=pn(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new It((function(t,n){i._resolve=t,i._reject=n})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(t){var n=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):n&&i.idbtrans&&i.idbtrans.abort(),dn(t)}))}function _t(t,n,e){this._ctx={table:t,index:":id"===n?null:n,or:e}}function kt(t,n){var e=null,r=null;if(n)try{e=n()}catch(u){r=u}var i=t._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:e,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function xt(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function Ot(t,n){return t._cfg.version-n._cfg.version}function jt(t,n,e){n.forEach((function(n){var r=e[n];t.forEach((function(t){n in t||(t===wt.prototype||t instanceof wt?h(t,n,{get:function(){return this.table(n)}}):t[n]=new mt(n,r))}))}))}function Et(t,n,e,r,i,o){var u=Wt(o?function(t,n,r){return e(o(t),n,r)}:e,i);t.onerror||(t.onerror=In(i)),t.onsuccess=k(n?function(){var e=t.result;if(e){var o=function(){e.continue()};n(e,(function(t){o=t}),r,i)&&u(e.value,e,(function(t){o=t})),o()}else r()}:function(){var n=t.result;if(n){var e=function(){n.continue()};u(n.value,n,(function(t){e=t})),e()}else r()},i)}function St(t,n){return P.cmp(t,n)}function Tt(t,n){return St(t,n)>0?t:n}function At(t,n){return P.cmp(t,n)}function Dt(t,n){return P.cmp(n,t)}function Ct(t,n){return t<n?-1:t===n?0:1}function Kt(t,n){return t>n?-1:t===n?0:1}function Ft(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}function Bt(t,n){for(var e=n.db.objectStoreNames,r=0;r<e.length;++r){var i=e[r],u=n.objectStore(i);c="getAll"in u;for(var a=0;a<u.indexNames.length;++a){var s=u.indexNames[a],f=u.index(s).keyPath,l="string"===typeof f?f:"["+m(f).join("+")+"]";if(t[i]){var h=t[i].idxByName[l];h&&(h.name=s)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c=!1)}function Lt(t){Y.on("blocked").fire(t),kn.filter((function(t){return t.name===Y.name&&t!==Y&&!t._vcFired})).map((function(n){return n.on("versionchange").fire(t)}))}this.version=function(t){if(N||V)throw new $.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=C.filter((function(n){return n._cfg.version===t}))[0];return n||(n=new st(t),C.push(n),C.sort(Ot),ut=!1,n)},u(st.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,t):t;var n={};C.forEach((function(t){u(n,t._cfg.storesSource)}));var e=this._cfg.dbschema={};return this._parseStoresSpec(n,e),D=Y._dbSchema=e,[M,Y,wt.prototype].forEach((function(t){for(var n in t)t[n]instanceof mt&&delete t[n]})),jt([M,Y,wt.prototype,this._cfg.tables],r(e),e),L=r(e),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,n){r(t).forEach((function(e){if(null!==t[e]){var r={},o=function(t){var n=[];return t.split(",").forEach((function(t){var e=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(e)?e.match(/^\[(.*)\]$/)[1].split("+"):e;n.push(new Bn(e,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),i(r),/\./.test(t)))})),n}(t[e]),u=o.shift();if(u.multi)throw new $.Schema("Primary key cannot be multi-valued");u.keyPath&&j(r,u.keyPath,u.auto?0:u.keyPath),o.forEach((function(t){if(t.auto)throw new $.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new $.Schema("Index must have a name and cannot be an empty string");j(r,t.keyPath,t.compound?t.keyPath.map((function(){return""})):"")})),n[e]=new Ln(e,u,o,r)}}))}}),this._allTables=M,this._createTransaction=function(t,n,e,r){return new wt(t,n,e,r)},this._whenReady=function(t){return z||Pt.letThrough?t():new It((function(t,n){if(!V){if(!w)return void n(new $.DatabaseClosed);Y.open().catch(Z)}X.then(t,n)})).then(t)},this.verno=0,this.open=function(){if(V||N)return X.then((function(){return U?dn(U):Y}));B&&(et._stackHolder=R()),V=!0,U=null,z=!1;var n=e,i=null;return It.race([et,new It((function(n,e){if(!P)throw new $.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=ut?P.open(t):P.open(t,Math.round(10*Y.verno));if(!o)throw new $.MissingAPI("IndexedDB API not available");o.onerror=In(e),o.onblocked=Wt(Lt),o.onupgradeneeded=Wt((function(n){if(i=o.transaction,ut&&!Y._allowEmptyDB){o.onerror=Kn,i.abort(),o.result.close();var r=P.deleteDatabase(t);r.onsuccess=r.onerror=Wt((function(){e(new $.NoSuchDatabase("Database "+t+" doesnt exist"))}))}else{i.onerror=In(e),ft((n.oldVersion>Math.pow(2,62)?0:n.oldVersion)/10,i,e)}}),e),o.onsuccess=Wt((function(){if(i=null,N=o.result,kn.push(Y),ut)!function(){if(Y.verno=N.version/10,Y._dbSchema=D={},0===(L=m(N.objectStoreNames,0)).length)return;var t=N.transaction(Mn(L),"readonly");L.forEach((function(n){for(var e=t.objectStore(n),r=e.keyPath,i=r&&"string"===typeof r&&-1!==r.indexOf("."),o=new Bn(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!==typeof r,i),u=[],a=0;a<e.indexNames.length;++a){var c=e.index(e.indexNames[a]);i=(r=c.keyPath)&&"string"===typeof r&&-1!==r.indexOf(".");var s=new Bn(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!==typeof r,i);u.push(s)}D[n]=new Ln(n,o,u,{})})),jt([M],r(D),D)}();else if(N.objectStoreNames.length>0)try{Bt(D,N.transaction(Mn(N.objectStoreNames),H))}catch(e){}N.onversionchange=Wt((function(t){Y._vcFired=!0,Y.on("versionchange").fire(t)})),ct||"__dbnames"===t||vn.dbnames.put({name:t}).catch(Z),n()}),e)}))]).then((function(){return G=[],It.resolve(Pn.vip(Y.on.ready.fire)).then((function t(){if(G.length>0){var n=G.reduce(at,Z);return G=[],It.resolve(Pn.vip(n)).then(t)}}))})).finally((function(){G=null})).then((function(){return V=!1,Y})).catch((function(t){try{i&&i.abort()}catch(n){}return V=!1,Y.close(),dn(U=t)})).finally((function(){z=!0,n()}))},this.close=function(){var t=kn.indexOf(Y);if(t>=0&&kn.splice(t,1),N){try{N.close()}catch(n){}N=null}w=!1,U=new $.DatabaseClosed,V&&a(U),X=new It((function(t){e=t})),et=new It((function(t,n){a=n}))},this.delete=function(){var n=arguments.length>0;return new It((function(e,r){if(n)throw new $.InvalidArgument("Arguments not allowed in db.delete()");function i(){Y.close();var n=P.deleteDatabase(t);n.onsuccess=Wt((function(){ct||vn.dbnames.delete(t).catch(Z),e()})),n.onerror=In(r),n.onblocked=Lt}V?X.then(i):i()}))},this.backendDB=function(){return N},this.isOpen=function(){return null!==N},this.hasBeenClosed=function(){return U&&U instanceof $.DatabaseClosed},this.hasFailed=function(){return null!==U},this.dynamicallyOpened=function(){return ut},this.name=t,f(this,{tables:{get:function(){return r(M).map((function(t){return M[t]}))}}}),this.on=pn(this,"populate","blocked","versionchange",{ready:[at,Z]}),this.on.ready.subscribe=g(this.on.ready.subscribe,(function(t){return function(n,e){Pn.vip((function(){z?(U||It.resolve().then(n),e&&t(n)):G?(G.push(n),e&&t(n)):(t(n),e||t((function t(){Y.on.ready.unsubscribe(n),Y.on.ready.unsubscribe(t)})))}))}})),this.transaction=function(){var t=yt.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,n,e){var r=Pt.trans;r&&r.db===Y&&-1===t.indexOf("!")||(r=null);var i=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var o=n.map((function(t){var n=t instanceof mt?t.name:t;if("string"!==typeof n)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n}));if("r"==t||t==H)t=H;else{if("rw"!=t&&t!=J)throw new $.InvalidArgument("Invalid transaction mode: "+t);t=J}if(r){if(r.mode===H&&t===J){if(!i)throw new $.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach((function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!i)throw new $.SubTransaction("Table "+t+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(a){return r?r._promise(null,(function(t,n){n(a)})):dn(a)}return r?r._promise(t,u,"lock"):Pt.trans?cn(Pt.transless,(function(){return Y._whenReady(u)})):Y._whenReady(u);function u(){return It.resolve().then((function(){var n,i=Pt.transless||Pt,u=Y._createTransaction(t,o,D,r),a={trans:u,transless:i};r?u.idbtrans=r.idbtrans:u.create(),e.constructor===vt&&tn();var c=It.follow((function(){if(n=e.call(u,u))if(n.constructor===pt){var t=nn.bind(null,null);n.then(t,t)}else"function"===typeof n.next&&"function"===typeof n.throw&&(n=Fn(n))}),a);return(n&&"function"===typeof n.then?It.resolve(n).then((function(t){return u.active?t:dn(new $.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return n}))).then((function(t){return r&&u._resolve(),u._completion.then((function(){return t}))})).catch((function(t){return u._reject(t),dn(t)}))}))}},this.table=function(t){if(!s(M,t))throw new $.InvalidTable("Table "+t+" does not exist");return M[t]},f(mt.prototype,{_trans:function(t,n,e){var r=this._tx||Pt.trans;return r&&r.db===Y?r===Pt.trans?r._promise(t,n,e):Zt((function(){return r._promise(t,n,e)}),{trans:r,transless:Pt.transless||Pt}):dt(t,[this.name],n)},_idbstore:function(t,n,e){var r=this.name;return this._trans(t,(function(t,e,i){if(-1===i.storeNames.indexOf(r))throw new $.NotFound("Table"+r+" not part of transaction");return n(t,e,i.idbtrans.objectStore(r),i)}),e)},get:function(t,n){if(t&&t.constructor===Object)return this.where(t).first(n);var e=this;return this._idbstore(H,(function(n,r,i){var o=i.get(t);o.onerror=In(r),o.onsuccess=Wt((function(){n(e.hook.reading.fire(o.result))}),r)})).then(n)},where:function(t){if("string"===typeof t)return new _t(this,t);if(i(t))return new _t(this,"["+t.join("+")+"]");var n=r(t);if(1===n.length)return this.where(n[0]).equals(t[n[0]]);var e=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&n.every((function(n){return t.keyPath.indexOf(n)>=0}))&&t.keyPath.every((function(t){return n.indexOf(t)>=0}))}))[0];if(e&&gn!==mn)return this.where(e.name).equals(e.keyPath.map((function(n){return t[n]})));e||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var o=this.schema.idxByName,u=n.reduce((function(n,e){return[n[0]||o[e],n[0]||!o[e]?Ft(n[1],(function(n){return""+O(n,e)==""+t[e]})):n[1]]}),[null,null]),a=u[0];return a?this.where(a.name).equals(t[a.keyPath]).filter(u[1]):e?this.filter(u[1]):this.where(n).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new kt(new _t(this,i(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new kt(new _t(this))},mapToClass:function(t,n){this.schema.mappedClass=t;var e=Object.create(t.prototype);n&&Tn(e,n),this.schema.instanceTemplate=e;var r=function(n){if(!n)return n;var e=Object.create(t.prototype);for(var r in n)if(s(n,r))try{e[r]=n[r]}catch(i){}return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(Pn.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===Z?this._idbstore(J,(function(n,e,r,i){n(bt(r,i,t,!1,Z))})):this.where(":id").anyOf(t).delete().then((function(){}))},bulkPut:function(t,n){var e=this;return this._idbstore(J,(function(r,i,o){if(!o.keyPath&&!e.schema.primKey.auto&&!n)throw new $.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&n)throw new $.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==t.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var u,a,c=function(t){0===s.length?r(t):i(new Q(e.name+".bulkPut(): "+s.length+" of "+f+" operations failed",s))},s=[],f=t.length,l=e;if(e.hook.creating.fire===Z&&e.hook.updating.fire===Z){a=gt(s);for(var h=0,d=t.length;h<d;++h)(u=n?o.put(t[h],n[h]):o.put(t[h])).onerror=a;u.onerror=gt(s,c),u.onsuccess=Dn(c)}else{var p=n||o.keyPath&&t.map((function(t){return O(t,o.keyPath)})),v=p&&_(p,(function(n,e){return null!=n&&[n,t[e]]}));(p?l.where(":id").anyOf(p.filter((function(t){return null!=t}))).modify((function(){this.value=v[this.primKey],v[this.primKey]=null})).catch(W,(function(t){s=t.failures})).then((function(){for(var e=[],r=n&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||v[o])&&(e.push(t[i]),n&&r.push(o),null!=o&&(v[o]=null))}return e.reverse(),n&&r.reverse(),l.bulkAdd(e,r)})).then((function(t){var n=p[p.length-1];return null!=n?n:t})):l.bulkAdd(t)).then(c).catch(Q,(function(t){s=s.concat(t.failures),c()})).catch(i)}}),"locked")},bulkAdd:function(t,n){var e=this,r=this.hook.creating.fire;return this._idbstore(J,(function(i,o,u,a){if(!u.keyPath&&!e.schema.primKey.auto&&!n)throw new $.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&n)throw new $.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==t.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();function c(t){0===h.length?i(t):o(new Q(e.name+".bulkAdd(): "+h.length+" of "+d+" operations failed",h))}var s,f,l,h=[],d=t.length;if(r!==Z){var p,v=u.keyPath;f=gt(h,null,!0),l=An(null),x((function(){for(var e=0,i=t.length;e<i;++e){p={onerror:null,onsuccess:null};var o=n&&n[e],c=t[e],h=n?o:v?O(c,v):void 0,d=r.call(p,h,c,a);null==h&&null!=d&&(v?j(c=A(c),v,d):o=d),(s=null!=o?u.add(c,o):u.add(c))._hookCtx=p,e<i-1&&(s.onerror=f,p.onsuccess&&(s.onsuccess=l))}}),(function(t){throw p.onerror&&p.onerror(t),t})),s.onerror=gt(h,c,!0),s.onsuccess=An(c)}else{f=gt(h);for(var y=0,m=t.length;y<m;++y)(s=n?u.add(t[y],n[y]):u.add(t[y])).onerror=f;s.onerror=gt(h,c),s.onsuccess=Dn(c)}}))},add:function(t,n){var e=this.hook.creating.fire;return this._idbstore(J,(function(r,i,o,u){var a={onsuccess:null,onerror:null};if(e!==Z){var c=null!=n?n:o.keyPath?O(t,o.keyPath):void 0,s=e.call(a,c,t,u);null==c&&null!=s&&(o.keyPath?j(t,o.keyPath,s):n=s)}try{var f=null!=n?o.add(t,n):o.add(t);f._hookCtx=a,f.onerror=Cn(i),f.onsuccess=An((function(n){var e=o.keyPath;e&&j(t,e,n),r(n)}))}catch(l){throw a.onerror&&a.onerror(l),l}}))},put:function(t,n){var e=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Z||i!==Z){var o=this.schema.primKey.keyPath,u=void 0!==n?n:o&&O(t,o);return null==u?this.add(t):(t=A(t),this._trans(J,(function(){return e.where(":id").equals(u).modify((function(){this.value=t})).then((function(r){return 0===r?e.add(t,n):u}))}),"locked"))}return this._idbstore(J,(function(e,r,i){var o=void 0!==n?i.put(t,n):i.put(t);o.onerror=In(r),o.onsuccess=Wt((function(n){var r=i.keyPath;r&&j(t,r,n.target.result),e(o.result)}))}))},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(J,(function(n,e,r){var i=r.delete(t);i.onerror=In(e),i.onsuccess=Wt((function(){n(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(J,(function(t,n,e){var r=e.clear();r.onerror=In(n),r.onsuccess=Wt((function(){t(r.result)}))}))},update:function(t,n){if("object"!==typeof n||i(n))throw new $.InvalidArgument("Modifications must be an object.");if("object"!==typeof t||i(t))return this.where(":id").equals(t).modify(n);r(n).forEach((function(e){j(t,e,n[e])}));var e=O(t,this.schema.primKey.keyPath);return void 0===e?dn(new $.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n)}}),f(wt.prototype,{_lock:function(){return b(!Pt.global),++this._reculock,1!==this._reculock||Pt.global||(Pt.lockOwnerFor=this),this},_unlock:function(){if(b(!Pt.global),0===--this._reculock)for(Pt.global||(Pt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{cn(t[1],t[0])}catch(n){}}return this},_locked:function(){return this._reculock&&Pt.lockOwnerFor!==this},create:function(t){var n=this;if(!this.mode)return this;if(b(!this.idbtrans),!t&&!N)switch(U&&U.name){case"DatabaseClosedError":throw new $.DatabaseClosed(U);case"MissingAPIError":throw new $.MissingAPI(U.message,U);default:throw new $.OpenFailed(U)}if(!this.active)throw new $.TransactionInactive;return b(null===this._completion._state),(t=this.idbtrans=t||N.transaction(Mn(this.storeNames),this.mode)).onerror=Wt((function(e){Kn(e),n._reject(t.error)})),t.onabort=Wt((function(e){Kn(e),n.active&&n._reject(new $.Abort(t.error)),n.active=!1,n.on("abort").fire(e)})),t.oncomplete=Wt((function(){n.active=!1,n._resolve()})),this},_promise:function(t,n,e){var r=this;if(t===J&&this.mode!==J)return dn(new $.ReadOnly("Transaction is readonly"));if(!this.active)return dn(new $.TransactionInactive);if(this._locked())return new It((function(i,o){r._blockedFuncs.push([function(){r._promise(t,n,e).then(i,o)},Pt])}));if(e)return Zt((function(){var t=new It((function(t,e){r._lock();var i=n(t,e,r);i&&i.then&&i.then(t,e)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var i=new It((function(t,e){var i=n(t,e,r);i&&i.then&&i.then(t,e)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var n=this._root();if(t=It.resolve(t),n._waitingFor)n._waitingFor=n._waitingFor.then((function(){return t}));else{n._waitingFor=t,n._waitingQueue=[];var e=n.idbtrans.objectStore(n.storeNames[0]);!function t(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(e.get(-1/0).onsuccess=t)}()}var r=n._waitingFor;return new It((function(e,i){t.then((function(t){return n._waitingQueue.push(Wt(e.bind(null,t)))}),(function(t){return n._waitingQueue.push(Wt(i.bind(null,t)))})).finally((function(){n._waitingFor===r&&(n._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new $.Abort),this.active=!1},tables:{get:(l="Transaction.tables",d=function(){return M},function(){return console.warn(l+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+q(R(),1)),d.apply(this,arguments)})},table:function(t){var n=Y.table(t);return new mt(t,n.schema,this)}}),f(_t.prototype,(function(){function t(t,n,e){var r=t instanceof _t?new kt(t):t;return r._ctx.error=e?new e(n):new TypeError(n),r}function n(t){return new kt(t,(function(){return T.only("")})).limit(0)}function e(t,n,e,r,i,o){for(var u=Math.min(t.length,r.length),a=-1,c=0;c<u;++c){var s=n[c];if(s!==r[c])return i(t[c],e[c])<0?t.substr(0,c)+e[c]+e.substr(c+1):i(t[c],r[c])<0?t.substr(0,c)+r[c]+e.substr(c+1):a>=0?t.substr(0,a)+n[a]+e.substr(a+1):null;i(t[c],s)<0&&(a=c)}return u<r.length&&"next"===o?t+e.substr(t.length):u<t.length&&"prev"===o?t.substr(0,e.length):a<0?null:t.substr(0,a)+r[a]+e.substr(a+1)}function r(n,r,i,o){var u,a,c,s,f,l,h,d=i.length;if(!i.every((function(t){return"string"===typeof t})))return t(n,_n);function p(t){u=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),a=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),c="next"===t?Ct:Kt;var n=i.map((function(t){return{lower:a(t),upper:u(t)}})).sort((function(t,n){return c(t.lower,n.lower)}));s=n.map((function(t){return t.upper})),f=n.map((function(t){return t.lower})),l=t,h="next"===t?"":o}p("next");var v=new kt(n,(function(){return T.bound(s[0],f[d-1]+o)}));v._ondirectionchange=function(t){p(t)};var y=0;return v._addAlgorithm((function(t,n,i){var o=t.key;if("string"!==typeof o)return!1;var u=a(o);if(r(u,f,y))return!0;for(var p=null,v=y;v<d;++v){var m=e(o,u,s[v],f[v],c,l);null===m&&null===p?y=v+1:(null===p||c(p,m)>0)&&(p=m)}return n(null!==p?function(){t.continue(p+h)}:i),!1})),v}return{between:function(e,r,i,o){i=!1!==i,o=!0===o;try{return St(e,r)>0||0===St(e,r)&&(i||o)&&(!i||!o)?n(this):new kt(this,(function(){return T.bound(e,r,!i,!o)}))}catch(u){return t(this,wn)}},equals:function(t){return new kt(this,(function(){return T.only(t)}))},above:function(t){return new kt(this,(function(){return T.lowerBound(t,!0)}))},aboveOrEqual:function(t){return new kt(this,(function(){return T.lowerBound(t)}))},below:function(t){return new kt(this,(function(){return T.upperBound(t,!0)}))},belowOrEqual:function(t){return new kt(this,(function(){return T.upperBound(t)}))},startsWith:function(n){return"string"!==typeof n?t(this,_n):this.between(n,n+mn,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):r(this,(function(t,n){return 0===t.indexOf(n[0])}),[t],mn)},equalsIgnoreCase:function(t){return r(this,(function(t,n){return t===n[0]}),[t],"")},anyOfIgnoreCase:function(){var t=F.apply(K,arguments);return 0===t.length?n(this):r(this,(function(t,n){return-1!==n.indexOf(t)}),t,"")},startsWithAnyOfIgnoreCase:function(){var t=F.apply(K,arguments);return 0===t.length?n(this):r(this,(function(t,n){return n.some((function(n){return 0===t.indexOf(n)}))}),t,mn)},anyOf:function(){var e=F.apply(K,arguments),r=At;try{e.sort(r)}catch(u){return t(this,wn)}if(0===e.length)return n(this);var i=new kt(this,(function(){return T.bound(e[0],e[e.length-1])}));i._ondirectionchange=function(t){r="next"===t?At:Dt,e.sort(r)};var o=0;return i._addAlgorithm((function(t,n,i){for(var u=t.key;r(u,e[o])>0;)if(++o===e.length)return n(i),!1;return 0===r(u,e[o])||(n((function(){t.continue(e[o])})),!1)})),i},notEqual:function(t){return this.inAnyRange([[bn,t],[t,gn]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var n=F.apply(K,arguments);if(0===n.length)return new kt(this);try{n.sort(At)}catch(r){return t(this,wn)}var e=n.reduce((function(t,n){return t?t.concat([[t[t.length-1][1],n]]):[[bn,n]]}),null);return e.push([n[n.length-1],gn]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(e,r){if(0===e.length)return n(this);if(!e.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&At(t[0],t[1])<=0})))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var u,a=At;function c(t,n){return a(t[0],n[0])}try{(u=e.reduce((function(t,n){for(var e=0,r=t.length;e<r;++e){var i=t[e];if(St(n[0],i[1])<0&&St(n[1],i[0])>0){i[0]=St(o=i[0],u=n[0])<0?o:u,i[1]=Tt(i[1],n[1]);break}}var o,u;return e===r&&t.push(n),t}),[])).sort(c)}catch(p){return t(this,wn)}var s=0,f=o?function(t){return At(t,u[s][1])>0}:function(t){return At(t,u[s][1])>=0},l=i?function(t){return Dt(t,u[s][0])>0}:function(t){return Dt(t,u[s][0])>=0};var h=f,d=new kt(this,(function(){return T.bound(u[0][0],u[u.length-1][1],!i,!o)}));return d._ondirectionchange=function(t){"next"===t?(h=f,a=At):(h=l,a=Dt),u.sort(c)},d._addAlgorithm((function(t,n,e){for(var r=t.key;h(r);)if(++s===u.length)return n(e),!1;return!!function(t){return!f(t)&&!l(t)}(r)||(0===St(r,u[s][1])||0===St(r,u[s][0])||n((function(){a===At?t.continue(u[s][0]):t.continue(u[s][1])})),!1)})),d},startsWithAnyOf:function(){var e=F.apply(K,arguments);return e.every((function(t){return"string"===typeof t}))?0===e.length?n(this):this.inAnyRange(e.map((function(t){return[t,t+mn]}))):t(this,"startsWithAnyOf() only works with strings")}}})),f(kt.prototype,(function(){function t(t,n){t.filter=Ft(t.filter,n)}function n(t,n,e){var r=t.replayFilter;t.replayFilter=r?function(){return Ft(r(),n())}:n,t.justLimit=e&&!r}function e(t,n){if(t.isPrimKey)return n;var e=t.table.schema.idxByName[t.index];if(!e)throw new $.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return n.index(e.name)}function i(t,n){var r=e(t,n);return t.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(t.range||null,t.dir+t.unique):r.openCursor(t.range||null,t.dir+t.unique)}function o(t,n,e,r,o){var u=t.replayFilter?Ft(t.filter,t.replayFilter()):t.filter;t.or?function(){var a={},c=0;function f(){2===++c&&e()}function l(t,e,i){if(!u||u(e,i,f,r)){var o=e.primaryKey,c=""+o;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(o)),s(a,c)||(a[c]=!0,n(t,e,i))}}t.or._iterate(l,f,r,o),Et(i(t,o),t.algorithm,l,f,r,!t.keysOnly&&t.valueMapper)}():Et(i(t,o),Ft(t.algorithm,u),n,e,r,!t.keysOnly&&t.valueMapper)}return{_read:function(t,n){var e=this._ctx;return e.error?e.table._trans(null,dn.bind(null,e.error)):e.table._idbstore(H,t).then(n)},_write:function(t){var n=this._ctx;return n.error?n.table._trans(null,dn.bind(null,n.error)):n.table._idbstore(J,t,"locked")},_addAlgorithm:function(t){var n=this._ctx;n.algorithm=Ft(n.algorithm,t)},_iterate:function(t,n,e,r){return o(this._ctx,t,n,e,r)},clone:function(t){var n=Object.create(this.constructor.prototype),e=Object.create(this._ctx);return t&&u(e,t),n._ctx=e,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var n=this._ctx;return this._read((function(e,r,i){o(n,t,e,r,i)}))},count:function(t){var n=this._ctx;if(xt(n,!0))return this._read((function(t,r,i){var o=e(n,i),u=n.range?o.count(n.range):o.count();u.onerror=In(r),u.onsuccess=function(e){t(Math.min(e.target.result,n.limit))}}),t);var r=0;return this._read((function(t,e,i){o(n,(function(){return++r,!1}),(function(){t(r)}),e,i)}),t)},sortBy:function(t,n){var e=t.split(".").reverse(),r=e[0],i=e.length-1;function o(t,n){return n?o(t[e[n]],n-1):t[r]}var u="next"===this._ctx.dir?1:-1;function a(t,n){var e=o(t,i),r=o(n,i);return e<r?-u:e>r?u:0}return this.toArray((function(t){return t.sort(a)})).then(n)},toArray:function(t){var n=this._ctx;return this._read((function(t,r,i){if(c&&"next"===n.dir&&xt(n,!0)&&n.limit>0){var u=n.table.hook.reading.fire,a=e(n,i),s=n.limit<1/0?a.getAll(n.range,n.limit):a.getAll(n.range);s.onerror=In(r),s.onsuccess=Dn(u===tt?t:function(n){try{t(n.map(u))}catch(e){r(e)}})}else{var f=[];o(n,(function(t){f.push(t)}),(function(){t(f)}),r,i)}}),t)},offset:function(t){var e=this._ctx;return t<=0||(e.offset+=t,xt(e)?n(e,(function(){var n=t;return function(t,e){return 0===n||(1===n?(--n,!1):(e((function(){t.advance(n),n=0})),!1))}})):n(e,(function(){var n=t;return function(){return--n<0}}))),this},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),n(this._ctx,(function(){var n=t;return function(t,e,r){return--n<=0&&e(r),n>=0}}),!0),this},until:function(n,e){return t(this._ctx,(function(t,r,i){return!n(t.value)||(r(i),e)})),this},first:function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},last:function(t){return this.reverse().first(t)},filter:function(n){return t(this._ctx,(function(t){return n(t.value)})),function(t,n){t.isMatch=Ft(t.isMatch,n)}(this._ctx,n),this},and:function(t){return this.filter(t)},or:function(t){return new _t(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each((function(n,e){t(e.key,e)}))},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each((function(n,e){t(e.primaryKey,e)}))},keys:function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var e=[];return this.each((function(t,n){e.push(n.key)})).then((function(){return e})).then(t)},primaryKeys:function(t){var n=this._ctx;if(c&&"next"===n.dir&&xt(n,!0)&&n.limit>0)return this._read((function(t,r,i){var o=e(n,i),u=n.limit<1/0?o.getAllKeys(n.range,n.limit):o.getAllKeys(n.range);u.onerror=In(r),u.onsuccess=Dn(t)})).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each((function(t,n){r.push(n.primaryKey)})).then((function(){return r})).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var n=this._ctx,e=n.index&&n.table.schema.idxByName[n.index];if(!e||!e.multi)return this;var r={};return t(this._ctx,(function(t){var n=t.primaryKey.toString(),e=s(r,n);return r[n]=!0,!e})),this},modify:function(t){var n=this,e=this._ctx.table.hook,i=e.updating.fire,o=e.deleting.fire;return this._write((function(e,a,c,f){var l;if("function"===typeof t)l=i===Z&&o===Z?t:function(n){var e=A(n);if(!1===t.call(this,n,this))return!1;if(s(this,"value")){var u=I(e,this.value),a=i.call(this,u,this.primKey,e,f);a&&(n=this.value,r(a).forEach((function(t){j(n,t,a[t])})))}else o.call(this,this.primKey,n,f)};else if(i===Z){var h=r(t),d=h.length;l=function(n){for(var e=!1,r=0;r<d;++r){var i=h[r],o=t[i];O(n,i)!==o&&(j(n,i,o),e=!0)}return e}}else{var p=t;t=E(p),l=function(n){var e=!1,o=i.call(this,t,this.primKey,A(n),f);return o&&u(t,o),r(t).forEach((function(r){var i=t[r];O(n,r)!==i&&(j(n,r,i),e=!0)})),o&&(t=E(p)),e}}var v=0,y=0,m=!1,g=[],b=[],w=null;function _(t){return t&&(g.push(t),b.push(w)),a(new W("Error modifying one or more objects",g,y,b))}function k(){m&&y+g.length===v&&(g.length>0?_():e(y))}n.clone().raw()._iterate((function(t,n){w=n.primaryKey;var e={primKey:n.primaryKey,value:t,onsuccess:null,onerror:null};function r(t){return g.push(t),b.push(e.primKey),k(),!0}if(!1!==l.call(e,t,e)){var i=!s(e,"value");++v,x((function(){var t=i?n.delete():n.update(e.value);t._hookCtx=e,t.onerror=Cn(r),t.onsuccess=An((function(){++y,k()}))}),r)}else e.onsuccess&&e.onsuccess(e.value)}),(function(){m=!0,k()}),_,c)}))},delete:function(){var t=this,n=this._ctx,e=n.range,r=n.table.hook.deleting.fire,i=r!==Z;if(!i&&xt(n)&&(n.isPrimKey&&!jn||!e))return this._write((function(t,n,r){var i=In(n),o=e?r.count(e):r.count();o.onerror=i,o.onsuccess=function(){var u=o.result;x((function(){var n=e?r.delete(e):r.clear();n.onerror=i,n.onsuccess=function(){return t(u)}}),(function(t){return n(t)}))}}));var o=i?2e3:1e4;return this._write((function(e,u,a,c){var s=0,f=t.clone({keysOnly:!n.isMatch&&!i}).distinct().limit(o).raw(),l=[];e(function t(){return f.each(i?function(t,n){l.push([n.primaryKey,n.value])}:function(t,n){l.push(n.primaryKey)}).then((function(){return i?l.sort((function(t,n){return At(t[0],n[0])})):l.sort(At),bt(a,c,l,i,r)})).then((function(){var n=l.length;return s+=n,l=[],n<o?s:t()}))}())}))}}})),u(this,{Collection:kt,Table:mt,Transaction:wt,Version:st,WhereClause:_t}),Y.on("versionchange",(function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+Y.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Y.name+"'. Closing db now to resume the delete request."),Y.close()})),Y.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+Y.name+"') was blocked"):console.warn("Upgrade '"+Y.name+"' blocked by other connection holding version "+t.oldVersion/10)})),y.forEach((function(t){t(Y)}))}function Sn(t){if("function"===typeof t)return new t;if(i(t))return[Sn(t[0])];if(t&&"object"===typeof t){var n={};return Tn(n,t),n}return t}function Tn(t,n){return r(n).forEach((function(e){var r=Sn(n[e]);t[e]=r})),t}function An(t){return Wt((function(n){var e=n.target,r=e._hookCtx,i=r.value||e.result,o=r&&r.onsuccess;o&&o(i),t&&t(i)}),t)}function In(t){return Wt((function(n){return Kn(n),t(n.target.error),!1}))}function Dn(t){return Wt((function(n){t(n.target.result)}))}function Cn(t){return Wt((function(n){var e=n.target,r=e.error,i=e._hookCtx,o=i&&i.onerror;return o&&o(r),Kn(n),t(r),!1}))}function Kn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function Fn(t){var n=function(n){return t.next(n)},e=o(n),r=o((function(n){return t.throw(n)}));function o(t){return function(n){var o=t(n),u=o.value;return o.done?u:u&&"function"===typeof u.then?u.then(e,r):i(u)?It.all(u).then(e,r):e(u)}}return o(n)()}function Bn(t,n,e,r,i,o,u){this.name=t,this.keyPath=n,this.unique=e,this.multi=r,this.auto=i,this.compound=o,this.dotted=u;var a="string"===typeof n?n:n&&"["+[].join.call(n,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(i?"++":"")+a}function Ln(t,n,e,r){this.name=t,this.primKey=n||new Bn,this.indexes=e||[new Bn],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=_(e,(function(t){return[t.name,t]}))}function Mn(t){return 1===t.length?t[0]:t}function Nn(t){var n=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return n&&n.bind(t)}L(B,En),f(Pn,X),f(Pn,{delete:function(t){var n=new Pn(t),e=n.delete();return e.onblocked=function(t){return n.on("blocked",t),this},e},exists:function(t){return new Pn(t).open().then((function(t){return t.close(),!0})).catch(Pn.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(t){var n=Nn(Pn.dependencies.indexedDB);return n?new It((function(t,e){var r=n();r.onsuccess=function(n){t(m(n.target.result,0))},r.onerror=In(e)})).then(t):vn.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&u(this,t)}},applyStructure:Tn,ignoreTransaction:function(t){return Pt.trans?cn(Pt.transless,t):t()},vip:function(t){return Zt((function(){return Pt.letThrough=!0,t()}))},async:function(t){return function(){try{var n=Fn(t.apply(this,arguments));return n&&"function"===typeof n.then?n:It.resolve(n)}catch(e){return dn(e)}}},spawn:function(t,n,e){try{var r=Fn(t.apply(e,n||[]));return r&&"function"===typeof r.then?r:It.resolve(r)}catch(i){return dn(i)}},currentTransaction:{get:function(){return Pt.trans||null}},waitFor:function(t,n){var e=It.resolve("function"===typeof t?Pn.ignoreTransaction(t):t).timeout(n||6e4);return Pt.trans?Pt.trans.waitFor(e):e},Promise:It,debug:{get:function(){return B},set:function(t){L(t,"dexie"===t?function(){return!0}:En)}},derive:d,extend:u,props:f,override:g,Events:pn,getByKeyPath:O,setByKeyPath:j,delByKeyPath:function(t,n){"string"===typeof n?j(t,n,void 0):"length"in n&&[].map.call(n,(function(n){j(t,n,void 0)}))},shallowClone:E,deepClone:A,getObjectDiff:I,asap:w,maxKey:gn,minKey:bn,addons:[],connections:kn,MultiModifyError:$.Modify,errnames:H,IndexSpec:Bn,TableSchema:Ln,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:yn,version:yn.split(".").map((function(t){return parseInt(t)})).reduce((function(t,n,e){return t+n/Math.pow(10,2*e)})),default:Pn,Dexie:Pn}),It.rejectionMapper=function(t,n){if(!t||t instanceof z||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Y[t.name])return t;var e=new Y[t.name](n||t.message,t);return"stack"in t&&h(e,"stack",{get:function(){return this.inner.stack}}),e},(vn=new Pn("__dbnames")).version(1).stores({dbnames:"name"}),function(){var t="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem(t)||"[]").forEach((function(t){return vn.dbnames.put({name:t}).catch(Z)})),localStorage.removeItem(t))}catch(n){}}(),n.a=Pn}).call(this,e(6),e(17).setImmediate)},function(t,n,e){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(t,n){this._id=t,this._clearFn=n}n.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},n.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),n))},e(18),n.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,e(6))},function(t,n,e){(function(t,n){!function(t,e){"use strict";if(!t.setImmediate){var r,i=1,o={},u=!1,a=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?r=function(t){n.nextTick((function(){f(t)}))}:function(){if(t.postMessage&&!t.importScripts){var n=!0,e=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage("","*"),t.onmessage=e,n}}()?function(){var n="setImmediate$"+Math.random()+"$",e=function(e){e.source===t&&"string"===typeof e.data&&0===e.data.indexOf(n)&&f(+e.data.slice(n.length))};t.addEventListener?t.addEventListener("message",e,!1):t.attachEvent("onmessage",e),r=function(e){t.postMessage(n+e,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){f(t.data)},r=function(n){t.port2.postMessage(n)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;r=function(n){var e=a.createElement("script");e.onreadystatechange=function(){f(n),e.onreadystatechange=null,t.removeChild(e),e=null},t.appendChild(e)}}():r=function(t){setTimeout(f,0,t)},c.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),e=0;e<n.length;e++)n[e]=arguments[e+1];var u={callback:t,args:n};return o[i]=u,r(i),i++},c.clearImmediate=s}function s(t){delete o[t]}function f(t){if(u)setTimeout(f,0,t);else{var n=o[t];if(n){u=!0;try{!function(t){var n=t.callback,e=t.args;switch(e.length){case 0:n();break;case 1:n(e[0]);break;case 2:n(e[0],e[1]);break;case 3:n(e[0],e[1],e[2]);break;default:n.apply(void 0,e)}}(n)}finally{s(t),u=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,e(6),e(19))},function(t,n){var e,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"===typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var c,s=[],f=!1,l=-1;function h(){f&&c&&(f=!1,c.length?s=c.concat(s):l=-1,s.length&&d())}function d(){if(!f){var t=a(h);f=!0;for(var n=s.length;n;){for(c=s,s=[];++l<n;)c&&c[l].run();l=-1,n=s.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function p(t,n){this.fun=t,this.array=n}function v(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];s.push(new p(t,n)),1!==s.length||f||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,,,,,,,,,,,function(t,n,e){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){return!n||"object"!==i(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function u(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,i=r(t);if(n){var u=r(this).constructor;e=Reflect.construct(i,arguments,u)}else e=i.apply(this,arguments);return o(this,e)}}e.d(n,"a",(function(){return u}))},function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));var r=e(8);var i=e(9);function o(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e(9);function i(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return e}}(t,n)||Object(r.a)(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,n,e){"use strict";function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function i(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}e.d(n,"a",(function(){return i}))}]]);